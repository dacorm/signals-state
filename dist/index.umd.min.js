!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";let t,e=0,r=0;const i=2,o=8;function n(t){this._value=t,this._version=0,this._node=void 0,this._targets=void 0}function s(t){for(let e=t._sources;void 0!==e;e=e._nextSource)if(e._source._version!==e._version||!e._source._refresh()||e._source._version!==e._version)return!0;return!1}n.prototype._refresh=function(){return!0},n.prototype._subscribe=function(t){this._targets!==t&&void 0===t._prevTarget&&(t._nextTarget=this._targets,void 0!==this._targets&&(this._targets._prevTarget=t),this._targets=t)},n.prototype._unsubscribe=function(t){if(void 0!==this._targets){const e=t._prevTarget,r=t._nextTarget;void 0!==e&&(e._nextTarget=r,t._prevTarget=void 0),void 0!==r&&(r._prevTarget=e,t._nextTarget=void 0),t===this._targets&&(this._targets=r)}},n.prototype.subscribe=function(t){const e=this;return effect((function(){const r=e.value,i=32&this._flags;this._flags&=-33;try{t(r)}finally{this._flags|=i}}))},n.prototype.valueOf=function(){return this.value},n.prototype.toString=function(){return this.value+""},n.prototype.toJSON=function(){return this.value},n.prototype.peek=function(){return this._value},Object.defineProperty(n.prototype,"value",{get(){const t=void 0;return void 0!==t&&(t._version=this._version),this._value},set(n){if(n!==this._value){r>100&&function(){throw new Error("Cycle detected")}(),this._value=n,this._version++,e++;try{for(let t=this._targets;void 0!==t;t=t._nextTarget)t._target._notify()}finally{!function(){if(e>1)return void e--;let n,_=!1;for(;void 0!==t;){let e=t;for(t=void 0,r++;void 0!==e;){const t=e._nextBatchedEffect;if(e._nextBatchedEffect=void 0,e._flags&=~i,!(e._flags&o)&&s(e))try{e._callback()}catch(t){_||(n=t,_=!0)}e=t}}if(r=0,e--,_)throw n}()}}}})}));
